---
description: This is helpful when creating context providers in React.
alwaysApply: false
---

When passing an object or an array through context, always memoize it with useMemo.

Otherwise, a different object or array will be passed each time the provider re-renders, which will trigger a re-render of all components that receive these values through context.

The above rule applies recursively: If the object or array you are memoizing contains any objects or arrays in them, you should memoize those. Otherwise, they will be different on each render and will cause the top-level useMemo call to think that the top-level object or array has changed.

Here's a small example:

```
function CountProvider({ children }) {
  const [count, setCount] = React.useState(0);

  const value = React.useMemo(() => {
    return { count, setCount };
  }, [count]);

  return (
    <CountContext.Provider value={value}>
      {children}
    </CountContext.Provider>
  );
}
```

The example above uses `React.useMemo`, but importing `useMemo` from React and calling it directly may be preferred based on the conventions in the codebase. Make sure to pay attention to those and follow them.
